<div id="rpm416-visualization-container">
  <style>
    .rpm416-button {
      margin-top: 5px;
      margin-bottom: 5px;
    }

    .rpm416-container {
      background-color: #c6d3d3;
    }

    .rpm416-header {
      font-size: medium;
      font-weight: bold;
      text-align: center;
      margin-top: -1px;
      margin-bottom: -1px;
    }

    .rpm416-group {
      margin-top: 8px;
      margin-bottom: 8px;
    }

    .rpm416-text-key {
      color: #990c9e;
    }

    .rpm416-text-value {
      color: #046ffd;
    }

    .rpm416-text-value-right-inline {
      width: 15%;
      display: inline-block;
      text-align: right;
    }

    .rpm416-text-unit {
      color: #769ca6;
    }

    .rpm416-valuebar {
      height: 8px;
      background-color: #9a9a9a;
      display: inline-block;
    }

    .rpm416-valuebar-inner {
      height: 100%;
      width: 0%;
      float: left;
    }

    .rpm416-valuebar-short {
      width: 60%;
    }

    .rpm416-valuebar-long {
      width: 90%;
    }

    .rpm416-grouping-table {
      width: 100%;
      margin-top: 10px;
    }

    .rpm416-grouping-table td {
      border: #aeaeae 1px solid;
      padding-left: 10px;
      padding-right: 10px;
      width: 48%;
    }

    .rpm416-td-leftalign {
      text-align: left;
    }

    .rpm416-inner-table td {
      border: none;
    }

    .rpm416-group-phase-1 {
      border: #e8b20a 2px solid;
      padding: 5px;
    }

    .rpm416-color-phase-1 {
      color: #e8b20a;
    }

    .rpm416-group-phase-2 {
      border: #1a8e08 2px solid;
      padding: 5px;
    }

    .rpm416-color-phase-2 {
      color: #1a8e08;
    }

    .rpm416-group-phase-3 {
      border: #ed210f 2px solid;
      padding: 5px;
    }

    .rpm416-color-phase-3 {
      color: #ed210f;
    }

    .rpm416-group-three-phase {
      border: #8663a9 2px solid;
      padding: 5px;
    }

    .rpm416-color-three-phase {
      color: #8663a9;
    }

    .rpm416-status-indicator {
      display: inline-block;
      height: 1em;
      width: 1em;
      border-radius: 50%;
      margin-left: 0.25em;
      margin-right: 0.25em;
    }

    .rpm416-indicator-big {
      height: 1.5em;
      width: 1.5em;
    }

    #rpm416-errorlist-table {
      width: 100%;
    }

    #rpm416-errorlist-table thead tr {
      height: 1.5em;
    }

    #rpm416-errorlist-table tbody {
      background-color: transparent;
      min-width: 100%;
    }

    #rpm416-errorlist-table th {
      text-align: center;
      padding: 4px;
      border: none;
      background-color: whitesmoke;
      height: 1.5em;
      position: sticky;
      top: 0;
    }

    #rpm416-errorlist-table td {
      height: 1.5em;
      text-align: center;
      padding: 4px;
      border: none;
    }

    #rpm416-substrate {
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      z-index: 50;
      background-color: #1c1c1c7f;
      display: none;
    }

    .rpm416-popup-menu {
      padding: 5px;
      position: absolute;
      left: 25%;
      top: 15%;
      min-width: 450px;
      width: 50%;
      z-index: 100;
      background-color: whitesmoke;
      display: none;
      text-align: left;
    }

    #rpm416-graph-table td {
      padding: 5px;
    }
  </style>

  <div id="rpm416-html-container">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <div class="container rpm416-container">
      <div class="row">
        <div class="col" style="text-align: left;">
          <button type="button" class="btn btn-primary btn-sm rpm416-button" id="rpm416-button-view">View</button>
        </div>
      </div>
      <div class="row">
        <div class="col-sm">
          <div class="rpm416-group rpm416-group-phase-1">
            <header class="rpm416-header rpm416-color-phase-1">Phase 1 (Group)</header>
            <table class="rpm416-grouping-table">
              <tbody>
                <tr>
                  <td class="rpm416-td-leftalign">
                    <div>Voltage (channel 1)</div>

                    <div>
                      <div class="rpm416-valuebar rpm416-valuebar-short" value="0">
                        <div class="valuebar-inner bg-success"></div>
                      </div>
                      <span class="rpm416-text-value rpm416-text-value-right-inline" id="rpm416-voltage-rms-1">0</span>
                      <span class="rpm416-text-unit">V</span>
                    </div>

                    <div>
                      <span class="rpm416-text-key">THDr:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline" id="rpm416-voltage-thdr-1">0</span>
                      <span class="rpm416-text-unit">%</span>
                      <span class="rpm416-text-key">Frequency:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline"
                        id="rpm416-voltage-frequency-1">0</span>
                      <span class="rpm416-text-unit">Hz</span>
                    </div>
                  </td>
                  <td class="rpm416-td-leftalign">
                    <div>Current (channel 4)</div>

                    <div>
                      <div class="rpm416-valuebar rpm416-valuebar-short" value="0">
                        <div class="valuebar-inner bg-success"></div>
                      </div>
                      <span class="rpm416-text-value rpm416-text-value-right-inline" id="rpm416-amperage-rms-1">0</span>
                      <span class="rpm416-text-unit">A</span>
                    </div>

                    <div>
                      <span class="rpm416-text-key">THDr:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline"
                        id="rpm416-amperage-thdr-1">0</span>
                      <span class="rpm416-text-unit">%</span>
                      <span class="rpm416-text-key">Frequency:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline"
                        id="rpm416-amperage-frequency-1">0</span>
                      <span class="rpm416-text-unit">Hz</span>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td colspan="2" class="rpm416-td-leftalign">
                    Power (channel 16)
                    <div>
                      <span class="rpm416-text-key">Full:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                      <div class="rpm416-valuebar rpm416-valuebar-short" value="0">
                        <div class="valuebar-inner bg-success"></div>
                      </div>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td class="rpm416-td-leftalign">
                    <div>
                      <span class="rpm416-text-key">Active:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                      <span class="rpm416-text-key">Energy:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                    </div>

                    <div class="rpm416-valuebar rpm416-valuebar-long" value="0">
                      <div class="valuebar-inner bg-success"></div>
                    </div>
                  </td>
                  <td class="rpm416-td-leftalign">
                    <div>
                      <span class="rpm416-text-key">Reactive:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                      <span class="rpm416-text-key">Energy:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                    </div>

                    <div class="rpm416-valuebar rpm416-valuebar-long" value="0">
                      <div class="valuebar-inner bg-success"></div>
                    </div>
                  </td>
                </tr>

                <tr>
                  <td colspan="2">
                    <span class="rpm416-text-key">Power ratio:</span>
                    <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                  </td>
                </tr>
              </tbody>
            </table>

          </div>
          <div class="rpm416-group rpm416-group-phase-2">
            <header class="rpm416-header rpm416-color-phase-2">Phase 2 (Group)</header>
            <table class="rpm416-grouping-table">
              <tbody>
                <tr>
                  <td class="rpm416-td-leftalign">
                    <div>Voltage (channel 2)</div>

                    <div>
                      <div class="rpm416-valuebar rpm416-valuebar-short" value="0">
                        <div class="valuebar-inner bg-success"></div>
                      </div>
                      <span class="rpm416-text-value rpm416-text-value-right-inline" id="rpm416-voltage-rms-2">0</span>
                      <span class="rpm416-text-unit">V</span>
                    </div>

                    <div>
                      <span class="rpm416-text-key">THDr:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline" id="rpm416-voltage-thdr-2">0</span>
                      <span class="rpm416-text-unit">%</span>
                      <span class="rpm416-text-key">Frequency:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline"
                        id="rpm416-voltage-frequency-2">0</span>
                      <span class="rpm416-text-unit">Hz</span>
                    </div>
                  </td>
                  <td class="rpm416-td-leftalign">
                    <div>Current (channel 5)</div>

                    <div>
                      <div class="rpm416-valuebar rpm416-valuebar-short" value="0">
                        <div class="valuebar-inner bg-success"></div>
                      </div>
                      <span class="rpm416-text-value rpm416-text-value-right-inline" id="rpm416-amperage-rms-2">0</span>
                      <span class="rpm416-text-unit">A</span>
                    </div>

                    <div>
                      <span class="rpm416-text-key">THDr:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline"
                        id="rpm416-amperage-thdr-2">0</span>
                      <span class="rpm416-text-unit">%</span>
                      <span class="rpm416-text-key">Frequency:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline"
                        id="rpm416-amperage-frequency-2">0</span>
                      <span class="rpm416-text-unit">Hz</span>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td colspan="2" class="rpm416-td-leftalign">
                    Power (channel 17)
                    <div>
                      <span class="rpm416-text-key">Full:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                      <div class="rpm416-valuebar rpm416-valuebar-short" value="0">
                        <div class="valuebar-inner bg-success"></div>
                      </div>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td class="rpm416-td-leftalign">
                    <div>
                      <span class="rpm416-text-key">Active:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                      <span class="rpm416-text-key">Energy:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                    </div>

                    <div class="rpm416-valuebar rpm416-valuebar-long" value="0">
                      <div class="valuebar-inner bg-success"></div>
                    </div>
                  </td>
                  <td class="rpm416-td-leftalign">
                    <div>
                      <span class="rpm416-text-key">Reactive:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                      <span class="rpm416-text-key">Energy:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                    </div>

                    <div class="rpm416-valuebar rpm416-valuebar-long" value="0">
                      <div class="valuebar-inner bg-success"></div>
                    </div>
                  </td>
                </tr>

                <tr>
                  <td colspan="2">
                    <span class="rpm416-text-key">Power ratio:</span>
                    <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="rpm416-group rpm416-group-phase-3">
            <header class="rpm416-header rpm416-color-phase-3">Phase 3 (Group)</header>
            <table class="rpm416-grouping-table">
              <tbody>
                <tr>
                  <td class="rpm416-td-leftalign">
                    <div>Voltage (channel 3)</div>

                    <div>
                      <div class="rpm416-valuebar rpm416-valuebar-short" value="0">
                        <div class="valuebar-inner bg-success"></div>
                      </div>
                      <span class="rpm416-text-value rpm416-text-value-right-inline" id="rpm416-voltage-rms-3">0</span>
                      <span class="rpm416-text-unit">V</span>
                    </div>

                    <div>
                      <span class="rpm416-text-key">THDr:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline" id="rpm416-voltage-thdr-3">0</span>
                      <span class="rpm416-text-unit">%</span>
                      <span class="rpm416-text-key">Frequency:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline"
                        id="rpm416-voltage-frequency-3">0</span>
                      <span class="rpm416-text-unit">Hz</span>
                    </div>
                  </td>
                  <td class="rpm416-td-leftalign">
                    <div>Current (channel 6)</div>

                    <div>
                      <div class="rpm416-valuebar rpm416-valuebar-short" value="0">
                        <div class="valuebar-inner bg-success"></div>
                      </div>
                      <span class="rpm416-text-value rpm416-text-value-right-inline" id="rpm416-amperage-rms-3">0</span>
                      <span class="rpm416-text-unit">A</span>
                    </div>

                    <div>
                      <span class="rpm416-text-key">THDr:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline"
                        id="rpm416-amperage-thdr-3">0</span>
                      <span class="rpm416-text-unit">%</span>
                      <span class="rpm416-text-key">Frequency:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline"
                        id="rpm416-amperage-frequency-3">0</span>
                      <span class="rpm416-text-unit">Hz</span>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td colspan="2" class="rpm416-td-leftalign">
                    Power (channel 18)
                    <div>
                      <span class="rpm416-text-key">Full:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                      <div class="rpm416-valuebar rpm416-valuebar-short" value="0">
                        <div class="valuebar-inner bg-success"></div>
                      </div>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td class="rpm416-td-leftalign">
                    <div>
                      <span class="rpm416-text-key">Active:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                      <span class="rpm416-text-key">Energy:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                    </div>

                    <div class="rpm416-valuebar rpm416-valuebar-long" value="0">
                      <div class="valuebar-inner bg-success"></div>
                    </div>
                  </td>
                  <td class="rpm416-td-leftalign">
                    <div>
                      <span class="rpm416-text-key">Reactive:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                      <span class="rpm416-text-key">Energy:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                    </div>

                    <div class="rpm416-valuebar rpm416-valuebar-long" value="0">
                      <div class="valuebar-inner bg-success"></div>
                    </div>
                  </td>
                </tr>

                <tr>
                  <td colspan="2">
                    <span class="rpm416-text-key">Power ratio:</span>
                    <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="rpm416-group rpm416-group-three-phase">
            <header class="rpm416-header rpm416-color-three-phase">Three-phase system</header>
            <div class="rpm416-group">
              Line voltage
              <div>
                <span class="rpm416-text-key">AB:</span>
                <div class="rpm416-valuebar rpm416-valuebar-short" value="0">
                  <div class="valuebar-inner bg-success"></div>
                </div>
                <span class="rpm416-text-value rpm416-text-value-right-inline" id="rpm416-voltage-line-ab">0</span>
              </div>
              <div>
                <span class="rpm416-text-key">BC:</span>
                <div class="rpm416-valuebar rpm416-valuebar-short" value="0">
                  <div class="valuebar-inner bg-success"></div>
                </div>
                <span class="rpm416-text-value rpm416-text-value-right-inline" id="rpm416-voltage-line-bc">0</span>
              </div>
              <div>
                <span class="rpm416-text-key">CA:</span>
                <div class="rpm416-valuebar rpm416-valuebar-short" value="0">
                  <div class="valuebar-inner bg-success"></div>
                </div>
                <span class="rpm416-text-value rpm416-text-value-right-inline" id="rpm416-voltage-line-ca">0</span>
              </div>

              <div>
                <span class="rpm416-text-key">Reverse seq-ce:</span>
                <span class="rpm416-text-value rpm416-text-value-right-inline" style="width:10%"
                  id="rpm416-negative-sequence-value">0</span>
                <span class="rpm416-text-unit">V</span>
                <span class="rpm416-text-key">Direct seq-ce:</span>
                <span class="rpm416-text-value rpm416-text-value-right-inline" style="width:10%"
                  id="rpm416-positive-sequence-value">0</span>
                <span class="rpm416-text-unit">V</span>
                <span class="rpm416-text-key">Zero seq-ce:</span>
                <span class="rpm416-text-value rpm416-text-value-right-inline" style="width:10%"
                  id="rpm416-zero-sequence-value">0</span>
                <span class="rpm416-text-unit">V</span>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm">

          <table class="rpm416-grouping-table">
            <tbody>
              <tr>
                <td class="rpm416-td-leftalign">
                  <div>Analog voltage (Channel 10):</div>
                  <div>
                    <div class="rpm416-valuebar rpm416-valuebar-short" value="0">
                      <div class="valuebar-inner bg-success"></div>
                    </div>
                    <span class="rpm416-text-value rpm416-text-value-right-inline" id="rpm416-analog-voltage">0</span>
                  </div>
                  <div>
                    <span class="rpm416-text-key">User scale:</span>
                    <span class="rpm416-text-value rpm416-text-value-right-inline"
                      id="rpm416-analog-voltage-userscale">0</span>
                  </div>
                </td>
                <td class="rpm416-td-leftalign">
                  <div>Analog current (Channel 11):</div>
                  <div>
                    <div class="rpm416-valuebar rpm416-valuebar-short" value="0">
                      <div class="valuebar-inner bg-success"></div>
                    </div>
                    <span class="rpm416-text-value rpm416-text-value-right-inline" id="rpm416-analog-amperage">0</span>
                  </div>
                  <div>
                    <span class="rpm416-text-key">User scale:</span>
                    <span class="rpm416-text-value rpm416-text-value-right-inline"
                      id="rpm416-analog-amperage-userscale">0</span>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <table class="rpm416-grouping-table">
            <tbody>
              <tr>
                <td class="rpm416-td-leftalign">
                  Current (Channel 7):
                  <div class="rpm416-valuebar rpm416-valuebar-short" value="0">
                    <div class="valuebar-inner bg-success"></div>
                  </div>
                  <span class="rpm416-text-value rpm416-text-value-right-inline" id="rpm416-amperage-rms">0</span>
                  <div>
                    <span class="rpm416-text-key">THDr:</span>
                    <span class="rpm416-text-value rpm416-text-value-right-inline" id="rpm416-amperage-thdr">0</span>
                    <span class="rpm416-text-key">Frequency:</span>
                    <span class="rpm416-text-value rpm416-text-value-right-inline"
                      id="rpm416-amperage-frequency">0</span>
                  </div>
                </td>
                <td rowspan="2">
                  <div>
                    <canvas id="rpm416-temperatures-graph">Your browser does not support the canvas element.</canvas>
                  </div>

                </td>
              </tr>
              <tr>
                <td>
                  <table class="rpm416-inner-table">
                    <thead>
                      <th colspan="3">
                        Digital inputs (channels 12&mdash;15)
                      </th>
                    </thead>
                    <tbody>
                      <tr>
                        <td>
                          <div><span class="rpm416-text-key">Input:</span> </div>
                          <div><span class="rpm416-text-key">1:</span> <span
                              class="rpm416-status-indicator bg-danger"></span>
                          </div>
                          <div><span class="rpm416-text-key">2:</span> <span
                              class="rpm416-status-indicator bg-danger"></span>
                          </div>
                          <div><span class="rpm416-text-key">3:</span> <span
                              class="rpm416-status-indicator bg-danger"></span>
                          </div>
                          <div><span class="rpm416-text-key">4:</span> <span
                              class="rpm416-status-indicator bg-danger"></span>
                          </div>
                        </td>
                        <td>
                          <div><span class="rpm416-text-key">Imp/min:</span> </div>
                          <div><span class="rpm416-text-value" id="rpm416-impuls-frequency-1">0</span></div>
                          <div><span class="rpm416-text-value" id="rpm416-impuls-frequency-2">0</span></div>
                          <div><span class="rpm416-text-value" id="rpm416-impuls-frequency-3">0</span></div>
                          <div><span class="rpm416-text-value" id="rpm416-impuls-frequency-4">0</span></div>
                        </td>
                        <td>
                          <div><span class="rpm416-text-key">Counter:</span> </div>
                          <div><span class="rpm416-text-value" id="rpm416-impuls-counter-1">0</span></div>
                          <div><span class="rpm416-text-value" id="rpm416-impuls-counter-2">0</span></div>
                          <div><span class="rpm416-text-value" id="rpm416-impuls-counter-3">0</span></div>
                          <div><span class="rpm416-text-value" id="rpm416-impuls-counter-4">0</span></div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </td>
              </tr>
            </tbody>
          </table>

          <table class="rpm416-grouping-table">
            <tbody>
              <tr>
                <td>
                  <span class="rpm416-text-key" id="rpm416-memory-card-state">-</span>
                </td>
                <td rowspan="2">
                  <div>
                    Status and control
                  </div>
                  <div>
                    <span class="rpm416-text-key">Errors present:</span>
                    <span class="rpm416-status-indicator rpm416-indicator-big bg-secondary"
                      id="rpm416-errors-present">!</span>
                  </div>

                  <div>
                    <span class="rpm416-text-key">Data recording:</span>
                    <span class="rpm416-status-indicator rpm416-indicator-big bg-secondary"
                      id="rpm416-data-recording">!</span>
                  </div>

                  <div style="text-align: left;">
                    <div>
                      <span class="rpm416-text-key" style="width:80%">Software version:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline"
                        id="rpm416-firmware-version">0</span>
                    </div>
                    <div>
                      <span class="rpm416-text-key" style="width:80%">Uptime:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline" style="width: 60%;"
                        id="rpm416-uptime">0</span>
                    </div>
                    <div>
                      <span class="rpm416-text-key" style="width:80%">Device time:</span>
                      <span class="rpm416-text-value rpm416-text-value-right-inline" style="width: 60%;"
                        id="rpm416-device-time">0</span>
                    </div>
                  </div>

                  <div>
                    <button type="button" class="btn btn-primary btn-sm rpm416-button" style="width: 48%;"
                      id="rpm416-start-recording">Start rec.<span class="spinner-border spinner-border-sm" role="status"
                        id="rpm416-start-recording-spinner" style="display: none;"></span></button>
                    <button type="button" class="btn btn-primary btn-sm rpm416-button" style="width: 48%;"
                      id="rpm416-reset-errors">Reset errors<span class="spinner-border spinner-border-sm" role="status"
                        id="rpm416-reset-errors-spinner" style="display: none;"></span></button>
                  </div>
                  <div>
                    <button type="button" class="btn btn-primary btn-sm rpm416-button" style="width: 48%;"
                      id="rpm416-stop-recording" disabled>Stop
                      rec.<span class="spinner-border spinner-border-sm" role="status"
                        id="rpm416-stop-recording-spinner" style="display: none;"></span></button>
                    <button type="button" class="btn btn-primary btn-sm rpm416-button" style="width: 48%;"
                      id="rpm416-restart-registrator">Restart<span class="spinner-border spinner-border-sm"
                        role="status" id="rpm416-restart-registrator-spinner" style="display: none;"></span></button>
                  </div>
                  <div>
                    <button type="button" class="btn btn-primary btn-sm rpm416-button" style="width: 48%;"
                      disabled>Memory
                      card</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <div>Data file</div>
                  <div>
                    <span class="rpm416-text-key">File name: </span>
                    <span class="rpm416-text-value rpm416-text-value-right-inline" id="rpm416-file-id"
                      style="width: 40%;">-</span>
                  </div>
                  <div>
                    <span class="rpm416-text-key">File size: </span>
                    <span class="rpm416-text-value rpm416-text-value-right-inline" id="rpm416-file-size"
                      style="width: 40%;">-</span>
                  </div>
                </td>
              </tr>
              <tr>
                <td colspan="2">
                  <div>Events</div>
                  <div>
                    <span class="rpm416-text-key">Event counter:</span>
                    <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                    <span class="rpm416-text-key">Last event:</span>
                    <span class="rpm416-text-value rpm416-text-value-right-inline">0</span>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>

          <div style="padding: 0.75em; overflow-y: auto; max-height: 18em;">
            <table id="rpm416-errorlist-table">
              <thead>
                <colgroup>
                  <col span="1" style="width: 10%">
                  <col span="1" style="width: 15%">
                  <col span="1" style="width: 50%">
                  <col span="1" style="width: 25%">
                </colgroup>
                <tr>
                  <th>

                  </th>
                  <th>
                    Code
                  </th>
                  <th>
                    Text
                  </th>
                  <th>
                    Time
                  </th>
                </tr>
              </thead>
              <tbody id="rpm416-errorlist-table-body"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div id="rpm416-substrate"></div>

    <div class="rpm416-popup-menu" id="rpm416-data-graphs">
      <button type="button" class="close close-button" aria-label="Close" id="rpm416-button-data-graphs-close"><span
          aria-hidden="true">&times;</span></button>

      <header class="rpm416-header">Data graphs</header>

      <div>
        <div>
          <canvas id="rpm416-history-graph">Your browser does not support the canvas element.</canvas>
        </div>

        <table id="rpm416-graph-table">
          <colgroup>
            <col span="1" style="width: 50%">
          </colgroup>
          <tbody style="text-align: center;">
            <tr>
              <td></td>
              <td><span class="rpm416-text-key">On/Off</span></td>
              <td><span class="rpm416-text-key">Channel</span></td>
              <td><span class="rpm416-text-key">Ratio</span></td>
              <td><span class="rpm416-text-key">Color</span></td>
            </tr>
            <tr>
              <td rowspan="3"> <button type="button" class="btn btn-primary btn-sm" id="rpm416-button-clear-graph">Clear
                  graph</button></td>
              <td><input type="checkbox" id="rpm416-checkbox-graphdata-1"
                  onchange="processChangedGraphselectorCheckbox(0)" checked></td>
              <td><select id="rpm416-select-graphvalue-1" onchange="clearGraphLine(0)">
                  <option value="101">Channel 1: Voltage RMS L1</option>
                  <option value="104">Channel 1: Voltage frequency L1</option>
                  <option value="107">Channel 1: Voltage THDr L1</option>
                  <option value="110">Channel 1: Peak + voltage L1</option>
                  <option value="113">Channel 1: Peak - voltage L1</option>
                  <option value="116">Channel 1: Instantaneous voltage L1</option>
                  <option value="119">Channel 2: Voltage RMS L2</option>
                  <option value="122">Channel 2: Voltage frequency L2</option>
                  <option value="125">Channel 2: Voltage THDr L2</option>
                  <option value="128">Channel 2: Peak + voltage L2</option>
                  <option value="131">Channel 2: Peak - voltage L2</option>
                  <option value="134">Channel 2: Instantaneous voltage L2</option>
                  <option value="137">Channel 3: Voltage RMS L3</option>
                  <option value="140">Channel 3: Voltage frequency L3</option>
                  <option value="143">Channel 3: Voltage THDr L3</option>
                  <option value="146">Channel 3: Peak + voltage L3</option>
                  <option value="149">Channel 3: Peak - voltage L3</option>
                  <option value="152">Channel 3: Instantaneous voltage L3</option>
                  <option value="155">Channel 4: Current RMS L1</option>
                  <option value="158">Channel 4: Current frequency L1</option>
                  <option value="161">Channel 4: Current THDr L1</option>
                  <option value="164">Channel 4: Peak + current L1</option>
                  <option value="167">Channel 4: Peak - current L1</option>
                  <option value="170">Channel 4: Instantaneous current L1</option>
                  <option value="173">Channel 5: Current RMS L2</option>
                  <option value="176">Channel 5: Current frequency L2</option>
                  <option value="179">Channel 5: Current THDr L2</option>
                  <option value="182">Channel 5: Peak + current L2</option>
                  <option value="185">Channel 5: Peak - current L2</option>
                  <option value="188">Channel 5: Instantaneous current L2</option>
                  <option value="191">Channel 6: Current RMS L3</option>
                  <option value="194">Channel 6: Current frequency L3</option>
                  <option value="197">Channel 6: Current THDr L3</option>
                  <option value="200">Channel 6: Peak + current L3</option>
                  <option value="203">Channel 6: Peak - current L3</option>
                  <option value="206">Channel 6: Instantaneous current L3</option>
                  <option value="209">Channel 7: Current RMS</option>
                  <option value="212">Channel 7: Current frequency</option>
                  <option value="215">Channel 7: Current THDr</option>
                  <option value="218">Channel 7: Peak + current</option>
                  <option value="221">Channel 7: Peak - current</option>
                  <option value="224">Channel 7: Instantaneous current</option>
                  <option value="227">Channel 8: Temperature</option>
                  <option value="245">Channel 9: Temperature</option>
                  <option value="263">Channel 10: Analog voltage 0-10 V</option>
                  <option value="266">Channel 10: User’s Value</option>
                  <option value="281">Channel 11: Analog current 0-20 mA</option>
                  <option value="284">Channel 11: User’s Value</option>
                  <option value="299">Channel 12: Digital input</option>
                  <option value="302">Channel 12: Pulse frequency</option>
                  <option value="305">Channel 12: Pulse scaler</option>
                  <option value="317">Channel 13: Digital input</option>
                  <option value="320">Channel 13: Pulse frequency</option>
                  <option value="323">Channel 13: Pulse scaler</option>
                  <option value="335">Channel 14: Digital input</option>
                  <option value="338">Channel 14: Pulse frequency</option>
                  <option value="341">Channel 14: Pulse scaler</option>
                  <option value="353">Channel 15: Digital input</option>
                  <option value="356">Channel 15: Pulse frequency</option>
                  <option value="359">Channel 15: Pulse scaler</option>
                  <option value="371">Channel 16: Full power L1</option>
                  <option value="374">Channel 16: Active power L1</option>
                  <option value="377">Channel 16: Reactive power L1</option>
                  <option value="380">Channel 16: Power factor (cos φ) L1</option>
                  <option value="383">Channel 16: Active Energy Scaler L1</option>
                  <option value="386">Channel 16: Reactive Energy Scaler L1</option>
                  <option value="389">Channel 17: Full power L2</option>
                  <option value="392">Channel 17: Active power L2</option>
                  <option value="395">Channel 17: Reactive power L2</option>
                  <option value="398">Channel 17: Power factor (cos φ) L2</option>
                  <option value="401">Channel 17: Active Energy Scaler L2</option>
                  <option value="404">Channel 17: Reactive Energy Scaler L2</option>
                  <option value="407">Channel 18: Full power L3</option>
                  <option value="410">Channel 18: Active power L3</option>
                  <option value="413">Channel 18: Reactive power L3</option>
                  <option value="416">Channel 18: Power factor (cos φ) L3</option>
                  <option value="419">Channel 18: Active Energy Scaler L3</option>
                  <option value="422">Channel 18: Reactive Energy Scaler L3</option>
                  <option value="425">Channel 19: Line voltage AB</option>
                  <option value="428">Channel 19: Line voltage BC</option>
                  <option value="431">Channel 19: Line voltage CA</option>
                  <option value="434">Channel 19: Negative sequence</option>
                  <option value="437">Channel 19: Positive sequence</option>
                  <option value="440">Channel 19: Zero sequence</option>
                </select></td>
              <td><input type="number" step="0.01" value="1" id="rpm416-input-ratio-1"></td>
              <td><input type="color"></td>
            </tr>
            <tr>
              <td><input type="checkbox" id="rpm416-checkbox-graphdata-2"
                  onchange="processChangedGraphselectorCheckbox(1)" checked></td>
              <td><select id="rpm416-select-graphvalue-2" onchange="clearGraphLine(1)">
                  <option value="101">Channel 1: Voltage RMS L1</option>
                  <option value="104">Channel 1: Voltage frequency L1</option>
                  <option value="107">Channel 1: Voltage THDr L1</option>
                  <option value="110">Channel 1: Peak + voltage L1</option>
                  <option value="113">Channel 1: Peak - voltage L1</option>
                  <option value="116">Channel 1: Instantaneous voltage L1</option>
                  <option value="119">Channel 2: Voltage RMS L2</option>
                  <option value="122">Channel 2: Voltage frequency L2</option>
                  <option value="125">Channel 2: Voltage THDr L2</option>
                  <option value="128">Channel 2: Peak + voltage L2</option>
                  <option value="131">Channel 2: Peak - voltage L2</option>
                  <option value="134">Channel 2: Instantaneous voltage L2</option>
                  <option value="137">Channel 3: Voltage RMS L3</option>
                  <option value="140">Channel 3: Voltage frequency L3</option>
                  <option value="143">Channel 3: Voltage THDr L3</option>
                  <option value="146">Channel 3: Peak + voltage L3</option>
                  <option value="149">Channel 3: Peak - voltage L3</option>
                  <option value="152">Channel 3: Instantaneous voltage L3</option>
                  <option value="155">Channel 4: Current RMS L1</option>
                  <option value="158">Channel 4: Current frequency L1</option>
                  <option value="161">Channel 4: Current THDr L1</option>
                  <option value="164">Channel 4: Peak + current L1</option>
                  <option value="167">Channel 4: Peak - current L1</option>
                  <option value="170">Channel 4: Instantaneous current L1</option>
                  <option value="173">Channel 5: Current RMS L2</option>
                  <option value="176">Channel 5: Current frequency L2</option>
                  <option value="179">Channel 5: Current THDr L2</option>
                  <option value="182">Channel 5: Peak + current L2</option>
                  <option value="185">Channel 5: Peak - current L2</option>
                  <option value="188">Channel 5: Instantaneous current L2</option>
                  <option value="191">Channel 6: Current RMS L3</option>
                  <option value="194">Channel 6: Current frequency L3</option>
                  <option value="197">Channel 6: Current THDr L3</option>
                  <option value="200">Channel 6: Peak + current L3</option>
                  <option value="203">Channel 6: Peak - current L3</option>
                  <option value="206">Channel 6: Instantaneous current L3</option>
                  <option value="209">Channel 7: Current RMS</option>
                  <option value="212">Channel 7: Current frequency</option>
                  <option value="215">Channel 7: Current THDr</option>
                  <option value="218">Channel 7: Peak + current</option>
                  <option value="221">Channel 7: Peak - current</option>
                  <option value="224">Channel 7: Instantaneous current</option>
                  <option value="227">Channel 8: Temperature</option>
                  <option value="245">Channel 9: Temperature</option>
                  <option value="263">Channel 10: Analog voltage 0-10 V</option>
                  <option value="266">Channel 10: User’s Value</option>
                  <option value="281">Channel 11: Analog current 0-20 mA</option>
                  <option value="284">Channel 11: User’s Value</option>
                  <option value="299">Channel 12: Digital input</option>
                  <option value="302">Channel 12: Pulse frequency</option>
                  <option value="305">Channel 12: Pulse scaler</option>
                  <option value="317">Channel 13: Digital input</option>
                  <option value="320">Channel 13: Pulse frequency</option>
                  <option value="323">Channel 13: Pulse scaler</option>
                  <option value="335">Channel 14: Digital input</option>
                  <option value="338">Channel 14: Pulse frequency</option>
                  <option value="341">Channel 14: Pulse scaler</option>
                  <option value="353">Channel 15: Digital input</option>
                  <option value="356">Channel 15: Pulse frequency</option>
                  <option value="359">Channel 15: Pulse scaler</option>
                  <option value="371">Channel 16: Full power L1</option>
                  <option value="374">Channel 16: Active power L1</option>
                  <option value="377">Channel 16: Reactive power L1</option>
                  <option value="380">Channel 16: Power factor (cos φ) L1</option>
                  <option value="383">Channel 16: Active Energy Scaler L1</option>
                  <option value="386">Channel 16: Reactive Energy Scaler L1</option>
                  <option value="389">Channel 17: Full power L2</option>
                  <option value="392">Channel 17: Active power L2</option>
                  <option value="395">Channel 17: Reactive power L2</option>
                  <option value="398">Channel 17: Power factor (cos φ) L2</option>
                  <option value="401">Channel 17: Active Energy Scaler L2</option>
                  <option value="404">Channel 17: Reactive Energy Scaler L2</option>
                  <option value="407">Channel 18: Full power L3</option>
                  <option value="410">Channel 18: Active power L3</option>
                  <option value="413">Channel 18: Reactive power L3</option>
                  <option value="416">Channel 18: Power factor (cos φ) L3</option>
                  <option value="419">Channel 18: Active Energy Scaler L3</option>
                  <option value="422">Channel 18: Reactive Energy Scaler L3</option>
                  <option value="425">Channel 19: Line voltage AB</option>
                  <option value="428">Channel 19: Line voltage BC</option>
                  <option value="431">Channel 19: Line voltage CA</option>
                  <option value="434">Channel 19: Negative sequence</option>
                  <option value="437">Channel 19: Positive sequence</option>
                  <option value="440">Channel 19: Zero sequence</option>
                </select></td>
              <td><input type="number" step="0.01" value="1" id="rpm416-input-ratio-2"></td>
              <td><input type="color"></td>
            </tr>
            <tr>
              <td><input type="checkbox" id="rpm416-checkbox-graphdata-3"
                  onchange="processChangedGraphselectorCheckbox(2)" checked></td>
              <td><select id="rpm416-select-graphvalue-3" onchange="clearGraphLine(2)">
                  <option value="101">Channel 1: Voltage RMS L1</option>
                  <option value="104">Channel 1: Voltage frequency L1</option>
                  <option value="107">Channel 1: Voltage THDr L1</option>
                  <option value="110">Channel 1: Peak + voltage L1</option>
                  <option value="113">Channel 1: Peak - voltage L1</option>
                  <option value="116">Channel 1: Instantaneous voltage L1</option>
                  <option value="119">Channel 2: Voltage RMS L2</option>
                  <option value="122">Channel 2: Voltage frequency L2</option>
                  <option value="125">Channel 2: Voltage THDr L2</option>
                  <option value="128">Channel 2: Peak + voltage L2</option>
                  <option value="131">Channel 2: Peak - voltage L2</option>
                  <option value="134">Channel 2: Instantaneous voltage L2</option>
                  <option value="137">Channel 3: Voltage RMS L3</option>
                  <option value="140">Channel 3: Voltage frequency L3</option>
                  <option value="143">Channel 3: Voltage THDr L3</option>
                  <option value="146">Channel 3: Peak + voltage L3</option>
                  <option value="149">Channel 3: Peak - voltage L3</option>
                  <option value="152">Channel 3: Instantaneous voltage L3</option>
                  <option value="155">Channel 4: Current RMS L1</option>
                  <option value="158">Channel 4: Current frequency L1</option>
                  <option value="161">Channel 4: Current THDr L1</option>
                  <option value="164">Channel 4: Peak + current L1</option>
                  <option value="167">Channel 4: Peak - current L1</option>
                  <option value="170">Channel 4: Instantaneous current L1</option>
                  <option value="173">Channel 5: Current RMS L2</option>
                  <option value="176">Channel 5: Current frequency L2</option>
                  <option value="179">Channel 5: Current THDr L2</option>
                  <option value="182">Channel 5: Peak + current L2</option>
                  <option value="185">Channel 5: Peak - current L2</option>
                  <option value="188">Channel 5: Instantaneous current L2</option>
                  <option value="191">Channel 6: Current RMS L3</option>
                  <option value="194">Channel 6: Current frequency L3</option>
                  <option value="197">Channel 6: Current THDr L3</option>
                  <option value="200">Channel 6: Peak + current L3</option>
                  <option value="203">Channel 6: Peak - current L3</option>
                  <option value="206">Channel 6: Instantaneous current L3</option>
                  <option value="209">Channel 7: Current RMS</option>
                  <option value="212">Channel 7: Current frequency</option>
                  <option value="215">Channel 7: Current THDr</option>
                  <option value="218">Channel 7: Peak + current</option>
                  <option value="221">Channel 7: Peak - current</option>
                  <option value="224">Channel 7: Instantaneous current</option>
                  <option value="227">Channel 8: Temperature</option>
                  <option value="245">Channel 9: Temperature</option>
                  <option value="263">Channel 10: Analog voltage 0-10 V</option>
                  <option value="266">Channel 10: User’s Value</option>
                  <option value="281">Channel 11: Analog current 0-20 mA</option>
                  <option value="284">Channel 11: User’s Value</option>
                  <option value="299">Channel 12: Digital input</option>
                  <option value="302">Channel 12: Pulse frequency</option>
                  <option value="305">Channel 12: Pulse scaler</option>
                  <option value="317">Channel 13: Digital input</option>
                  <option value="320">Channel 13: Pulse frequency</option>
                  <option value="323">Channel 13: Pulse scaler</option>
                  <option value="335">Channel 14: Digital input</option>
                  <option value="338">Channel 14: Pulse frequency</option>
                  <option value="341">Channel 14: Pulse scaler</option>
                  <option value="353">Channel 15: Digital input</option>
                  <option value="356">Channel 15: Pulse frequency</option>
                  <option value="359">Channel 15: Pulse scaler</option>
                  <option value="371">Channel 16: Full power L1</option>
                  <option value="374">Channel 16: Active power L1</option>
                  <option value="377">Channel 16: Reactive power L1</option>
                  <option value="380">Channel 16: Power factor (cos φ) L1</option>
                  <option value="383">Channel 16: Active Energy Scaler L1</option>
                  <option value="386">Channel 16: Reactive Energy Scaler L1</option>
                  <option value="389">Channel 17: Full power L2</option>
                  <option value="392">Channel 17: Active power L2</option>
                  <option value="395">Channel 17: Reactive power L2</option>
                  <option value="398">Channel 17: Power factor (cos φ) L2</option>
                  <option value="401">Channel 17: Active Energy Scaler L2</option>
                  <option value="404">Channel 17: Reactive Energy Scaler L2</option>
                  <option value="407">Channel 18: Full power L3</option>
                  <option value="410">Channel 18: Active power L3</option>
                  <option value="413">Channel 18: Reactive power L3</option>
                  <option value="416">Channel 18: Power factor (cos φ) L3</option>
                  <option value="419">Channel 18: Active Energy Scaler L3</option>
                  <option value="422">Channel 18: Reactive Energy Scaler L3</option>
                  <option value="425">Channel 19: Line voltage AB</option>
                  <option value="428">Channel 19: Line voltage BC</option>
                  <option value="431">Channel 19: Line voltage CA</option>
                  <option value="434">Channel 19: Negative sequence</option>
                  <option value="437">Channel 19: Positive sequence</option>
                  <option value="440">Channel 19: Zero sequence</option>
                </select></td>
              <td><input type="number" step="0.01" value="1" id="rpm416-input-ratio-3"></td>
              <td><input type="color"></td>
            </tr>
            <tr>
              <td rowspan="3">
                <!-- Skip -->
              </td>
              <td><input type="checkbox" id="rpm416-checkbox-graphdata-4"
                  onchange="processChangedGraphselectorCheckbox(3)"></td>
              <td><select id="rpm416-select-graphvalue-4" onchange="clearGraphLine(3)" disabled>
                  <option value="101">Channel 1: Voltage RMS L1</option>
                  <option value="104">Channel 1: Voltage frequency L1</option>
                  <option value="107">Channel 1: Voltage THDr L1</option>
                  <option value="110">Channel 1: Peak + voltage L1</option>
                  <option value="113">Channel 1: Peak - voltage L1</option>
                  <option value="116">Channel 1: Instantaneous voltage L1</option>
                  <option value="119">Channel 2: Voltage RMS L2</option>
                  <option value="122">Channel 2: Voltage frequency L2</option>
                  <option value="125">Channel 2: Voltage THDr L2</option>
                  <option value="128">Channel 2: Peak + voltage L2</option>
                  <option value="131">Channel 2: Peak - voltage L2</option>
                  <option value="134">Channel 2: Instantaneous voltage L2</option>
                  <option value="137">Channel 3: Voltage RMS L3</option>
                  <option value="140">Channel 3: Voltage frequency L3</option>
                  <option value="143">Channel 3: Voltage THDr L3</option>
                  <option value="146">Channel 3: Peak + voltage L3</option>
                  <option value="149">Channel 3: Peak - voltage L3</option>
                  <option value="152">Channel 3: Instantaneous voltage L3</option>
                  <option value="155">Channel 4: Current RMS L1</option>
                  <option value="158">Channel 4: Current frequency L1</option>
                  <option value="161">Channel 4: Current THDr L1</option>
                  <option value="164">Channel 4: Peak + current L1</option>
                  <option value="167">Channel 4: Peak - current L1</option>
                  <option value="170">Channel 4: Instantaneous current L1</option>
                  <option value="173">Channel 5: Current RMS L2</option>
                  <option value="176">Channel 5: Current frequency L2</option>
                  <option value="179">Channel 5: Current THDr L2</option>
                  <option value="182">Channel 5: Peak + current L2</option>
                  <option value="185">Channel 5: Peak - current L2</option>
                  <option value="188">Channel 5: Instantaneous current L2</option>
                  <option value="191">Channel 6: Current RMS L3</option>
                  <option value="194">Channel 6: Current frequency L3</option>
                  <option value="197">Channel 6: Current THDr L3</option>
                  <option value="200">Channel 6: Peak + current L3</option>
                  <option value="203">Channel 6: Peak - current L3</option>
                  <option value="206">Channel 6: Instantaneous current L3</option>
                  <option value="209">Channel 7: Current RMS</option>
                  <option value="212">Channel 7: Current frequency</option>
                  <option value="215">Channel 7: Current THDr</option>
                  <option value="218">Channel 7: Peak + current</option>
                  <option value="221">Channel 7: Peak - current</option>
                  <option value="224">Channel 7: Instantaneous current</option>
                  <option value="227">Channel 8: Temperature</option>
                  <option value="245">Channel 9: Temperature</option>
                  <option value="263">Channel 10: Analog voltage 0-10 V</option>
                  <option value="266">Channel 10: User’s Value</option>
                  <option value="281">Channel 11: Analog current 0-20 mA</option>
                  <option value="284">Channel 11: User’s Value</option>
                  <option value="299">Channel 12: Digital input</option>
                  <option value="302">Channel 12: Pulse frequency</option>
                  <option value="305">Channel 12: Pulse scaler</option>
                  <option value="317">Channel 13: Digital input</option>
                  <option value="320">Channel 13: Pulse frequency</option>
                  <option value="323">Channel 13: Pulse scaler</option>
                  <option value="335">Channel 14: Digital input</option>
                  <option value="338">Channel 14: Pulse frequency</option>
                  <option value="341">Channel 14: Pulse scaler</option>
                  <option value="353">Channel 15: Digital input</option>
                  <option value="356">Channel 15: Pulse frequency</option>
                  <option value="359">Channel 15: Pulse scaler</option>
                  <option value="371">Channel 16: Full power L1</option>
                  <option value="374">Channel 16: Active power L1</option>
                  <option value="377">Channel 16: Reactive power L1</option>
                  <option value="380">Channel 16: Power factor (cos φ) L1</option>
                  <option value="383">Channel 16: Active Energy Scaler L1</option>
                  <option value="386">Channel 16: Reactive Energy Scaler L1</option>
                  <option value="389">Channel 17: Full power L2</option>
                  <option value="392">Channel 17: Active power L2</option>
                  <option value="395">Channel 17: Reactive power L2</option>
                  <option value="398">Channel 17: Power factor (cos φ) L2</option>
                  <option value="401">Channel 17: Active Energy Scaler L2</option>
                  <option value="404">Channel 17: Reactive Energy Scaler L2</option>
                  <option value="407">Channel 18: Full power L3</option>
                  <option value="410">Channel 18: Active power L3</option>
                  <option value="413">Channel 18: Reactive power L3</option>
                  <option value="416">Channel 18: Power factor (cos φ) L3</option>
                  <option value="419">Channel 18: Active Energy Scaler L3</option>
                  <option value="422">Channel 18: Reactive Energy Scaler L3</option>
                  <option value="425">Channel 19: Line voltage AB</option>
                  <option value="428">Channel 19: Line voltage BC</option>
                  <option value="431">Channel 19: Line voltage CA</option>
                  <option value="434">Channel 19: Negative sequence</option>
                  <option value="437">Channel 19: Positive sequence</option>
                  <option value="440">Channel 19: Zero sequence</option>
                </select></td>
              <td><input type="number" step="0.01" value="1" id="rpm416-input-ratio-4" disabled></td>
              <td><input type="color" disabled></td>
            </tr>
            <tr>
              <td><input type="checkbox" id="rpm416-checkbox-graphdata-5"
                  onchange="processChangedGraphselectorCheckbox(4)"></td>
              <td><select id="rpm416-select-graphvalue-5" onchange="clearGraphLine(4)" disabled>
                  <option value="101">Channel 1: Voltage RMS L1</option>
                  <option value="104">Channel 1: Voltage frequency L1</option>
                  <option value="107">Channel 1: Voltage THDr L1</option>
                  <option value="110">Channel 1: Peak + voltage L1</option>
                  <option value="113">Channel 1: Peak - voltage L1</option>
                  <option value="116">Channel 1: Instantaneous voltage L1</option>
                  <option value="119">Channel 2: Voltage RMS L2</option>
                  <option value="122">Channel 2: Voltage frequency L2</option>
                  <option value="125">Channel 2: Voltage THDr L2</option>
                  <option value="128">Channel 2: Peak + voltage L2</option>
                  <option value="131">Channel 2: Peak - voltage L2</option>
                  <option value="134">Channel 2: Instantaneous voltage L2</option>
                  <option value="137">Channel 3: Voltage RMS L3</option>
                  <option value="140">Channel 3: Voltage frequency L3</option>
                  <option value="143">Channel 3: Voltage THDr L3</option>
                  <option value="146">Channel 3: Peak + voltage L3</option>
                  <option value="149">Channel 3: Peak - voltage L3</option>
                  <option value="152">Channel 3: Instantaneous voltage L3</option>
                  <option value="155">Channel 4: Current RMS L1</option>
                  <option value="158">Channel 4: Current frequency L1</option>
                  <option value="161">Channel 4: Current THDr L1</option>
                  <option value="164">Channel 4: Peak + current L1</option>
                  <option value="167">Channel 4: Peak - current L1</option>
                  <option value="170">Channel 4: Instantaneous current L1</option>
                  <option value="173">Channel 5: Current RMS L2</option>
                  <option value="176">Channel 5: Current frequency L2</option>
                  <option value="179">Channel 5: Current THDr L2</option>
                  <option value="182">Channel 5: Peak + current L2</option>
                  <option value="185">Channel 5: Peak - current L2</option>
                  <option value="188">Channel 5: Instantaneous current L2</option>
                  <option value="191">Channel 6: Current RMS L3</option>
                  <option value="194">Channel 6: Current frequency L3</option>
                  <option value="197">Channel 6: Current THDr L3</option>
                  <option value="200">Channel 6: Peak + current L3</option>
                  <option value="203">Channel 6: Peak - current L3</option>
                  <option value="206">Channel 6: Instantaneous current L3</option>
                  <option value="209">Channel 7: Current RMS</option>
                  <option value="212">Channel 7: Current frequency</option>
                  <option value="215">Channel 7: Current THDr</option>
                  <option value="218">Channel 7: Peak + current</option>
                  <option value="221">Channel 7: Peak - current</option>
                  <option value="224">Channel 7: Instantaneous current</option>
                  <option value="227">Channel 8: Temperature</option>
                  <option value="245">Channel 9: Temperature</option>
                  <option value="263">Channel 10: Analog voltage 0-10 V</option>
                  <option value="266">Channel 10: User’s Value</option>
                  <option value="281">Channel 11: Analog current 0-20 mA</option>
                  <option value="284">Channel 11: User’s Value</option>
                  <option value="299">Channel 12: Digital input</option>
                  <option value="302">Channel 12: Pulse frequency</option>
                  <option value="305">Channel 12: Pulse scaler</option>
                  <option value="317">Channel 13: Digital input</option>
                  <option value="320">Channel 13: Pulse frequency</option>
                  <option value="323">Channel 13: Pulse scaler</option>
                  <option value="335">Channel 14: Digital input</option>
                  <option value="338">Channel 14: Pulse frequency</option>
                  <option value="341">Channel 14: Pulse scaler</option>
                  <option value="353">Channel 15: Digital input</option>
                  <option value="356">Channel 15: Pulse frequency</option>
                  <option value="359">Channel 15: Pulse scaler</option>
                  <option value="371">Channel 16: Full power L1</option>
                  <option value="374">Channel 16: Active power L1</option>
                  <option value="377">Channel 16: Reactive power L1</option>
                  <option value="380">Channel 16: Power factor (cos φ) L1</option>
                  <option value="383">Channel 16: Active Energy Scaler L1</option>
                  <option value="386">Channel 16: Reactive Energy Scaler L1</option>
                  <option value="389">Channel 17: Full power L2</option>
                  <option value="392">Channel 17: Active power L2</option>
                  <option value="395">Channel 17: Reactive power L2</option>
                  <option value="398">Channel 17: Power factor (cos φ) L2</option>
                  <option value="401">Channel 17: Active Energy Scaler L2</option>
                  <option value="404">Channel 17: Reactive Energy Scaler L2</option>
                  <option value="407">Channel 18: Full power L3</option>
                  <option value="410">Channel 18: Active power L3</option>
                  <option value="413">Channel 18: Reactive power L3</option>
                  <option value="416">Channel 18: Power factor (cos φ) L3</option>
                  <option value="419">Channel 18: Active Energy Scaler L3</option>
                  <option value="422">Channel 18: Reactive Energy Scaler L3</option>
                  <option value="425">Channel 19: Line voltage AB</option>
                  <option value="428">Channel 19: Line voltage BC</option>
                  <option value="431">Channel 19: Line voltage CA</option>
                  <option value="434">Channel 19: Negative sequence</option>
                  <option value="437">Channel 19: Positive sequence</option>
                  <option value="440">Channel 19: Zero sequence</option>
                </select></td>
              <td><input type="number" step="0.01" value="1" id="rpm416-input-ratio-5" disabled></td>
              <td><input type="color" disabled></td>
            </tr>
            <tr>
              <td><input type="checkbox" id="rpm416-checkbox-graphdata-6"
                  onchange="processChangedGraphselectorCheckbox(5)"></td>
              <td><select id="rpm416-select-graphvalue-6" onchange="clearGraphLine(5)" disabled>
                  <option value="101">Channel 1: Voltage RMS L1</option>
                  <option value="104">Channel 1: Voltage frequency L1</option>
                  <option value="107">Channel 1: Voltage THDr L1</option>
                  <option value="110">Channel 1: Peak + voltage L1</option>
                  <option value="113">Channel 1: Peak - voltage L1</option>
                  <option value="116">Channel 1: Instantaneous voltage L1</option>
                  <option value="119">Channel 2: Voltage RMS L2</option>
                  <option value="122">Channel 2: Voltage frequency L2</option>
                  <option value="125">Channel 2: Voltage THDr L2</option>
                  <option value="128">Channel 2: Peak + voltage L2</option>
                  <option value="131">Channel 2: Peak - voltage L2</option>
                  <option value="134">Channel 2: Instantaneous voltage L2</option>
                  <option value="137">Channel 3: Voltage RMS L3</option>
                  <option value="140">Channel 3: Voltage frequency L3</option>
                  <option value="143">Channel 3: Voltage THDr L3</option>
                  <option value="146">Channel 3: Peak + voltage L3</option>
                  <option value="149">Channel 3: Peak - voltage L3</option>
                  <option value="152">Channel 3: Instantaneous voltage L3</option>
                  <option value="155">Channel 4: Current RMS L1</option>
                  <option value="158">Channel 4: Current frequency L1</option>
                  <option value="161">Channel 4: Current THDr L1</option>
                  <option value="164">Channel 4: Peak + current L1</option>
                  <option value="167">Channel 4: Peak - current L1</option>
                  <option value="170">Channel 4: Instantaneous current L1</option>
                  <option value="173">Channel 5: Current RMS L2</option>
                  <option value="176">Channel 5: Current frequency L2</option>
                  <option value="179">Channel 5: Current THDr L2</option>
                  <option value="182">Channel 5: Peak + current L2</option>
                  <option value="185">Channel 5: Peak - current L2</option>
                  <option value="188">Channel 5: Instantaneous current L2</option>
                  <option value="191">Channel 6: Current RMS L3</option>
                  <option value="194">Channel 6: Current frequency L3</option>
                  <option value="197">Channel 6: Current THDr L3</option>
                  <option value="200">Channel 6: Peak + current L3</option>
                  <option value="203">Channel 6: Peak - current L3</option>
                  <option value="206">Channel 6: Instantaneous current L3</option>
                  <option value="209">Channel 7: Current RMS</option>
                  <option value="212">Channel 7: Current frequency</option>
                  <option value="215">Channel 7: Current THDr</option>
                  <option value="218">Channel 7: Peak + current</option>
                  <option value="221">Channel 7: Peak - current</option>
                  <option value="224">Channel 7: Instantaneous current</option>
                  <option value="227">Channel 8: Temperature</option>
                  <option value="245">Channel 9: Temperature</option>
                  <option value="263">Channel 10: Analog voltage 0-10 V</option>
                  <option value="266">Channel 10: User’s Value</option>
                  <option value="281">Channel 11: Analog current 0-20 mA</option>
                  <option value="284">Channel 11: User’s Value</option>
                  <option value="299">Channel 12: Digital input</option>
                  <option value="302">Channel 12: Pulse frequency</option>
                  <option value="305">Channel 12: Pulse scaler</option>
                  <option value="317">Channel 13: Digital input</option>
                  <option value="320">Channel 13: Pulse frequency</option>
                  <option value="323">Channel 13: Pulse scaler</option>
                  <option value="335">Channel 14: Digital input</option>
                  <option value="338">Channel 14: Pulse frequency</option>
                  <option value="341">Channel 14: Pulse scaler</option>
                  <option value="353">Channel 15: Digital input</option>
                  <option value="356">Channel 15: Pulse frequency</option>
                  <option value="359">Channel 15: Pulse scaler</option>
                  <option value="371">Channel 16: Full power L1</option>
                  <option value="374">Channel 16: Active power L1</option>
                  <option value="377">Channel 16: Reactive power L1</option>
                  <option value="380">Channel 16: Power factor (cos φ) L1</option>
                  <option value="383">Channel 16: Active Energy Scaler L1</option>
                  <option value="386">Channel 16: Reactive Energy Scaler L1</option>
                  <option value="389">Channel 17: Full power L2</option>
                  <option value="392">Channel 17: Active power L2</option>
                  <option value="395">Channel 17: Reactive power L2</option>
                  <option value="398">Channel 17: Power factor (cos φ) L2</option>
                  <option value="401">Channel 17: Active Energy Scaler L2</option>
                  <option value="404">Channel 17: Reactive Energy Scaler L2</option>
                  <option value="407">Channel 18: Full power L3</option>
                  <option value="410">Channel 18: Active power L3</option>
                  <option value="413">Channel 18: Reactive power L3</option>
                  <option value="416">Channel 18: Power factor (cos φ) L3</option>
                  <option value="419">Channel 18: Active Energy Scaler L3</option>
                  <option value="422">Channel 18: Reactive Energy Scaler L3</option>
                  <option value="425">Channel 19: Line voltage AB</option>
                  <option value="428">Channel 19: Line voltage BC</option>
                  <option value="431">Channel 19: Line voltage CA</option>
                  <option value="434">Channel 19: Negative sequence</option>
                  <option value="437">Channel 19: Positive sequence</option>
                  <option value="440">Channel 19: Zero sequence</option>
                </select></td>
              <td><input type="number" step="0.01" value="1" id="rpm416-input-ratio-6" disabled></td>
              <td><input type="color" disabled></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Temperature bars -->
  <script>
    var rpm416temperatureBars = (function () {
      const data = [
        { channel: 8, value: NaN },
        { channel: 9, value: NaN },
      ];

      return new Chart(
        document.querySelector("#rpm416-temperatures-graph"),
        {
          type: "bar",
          options: {
            animation: false,
            scales: {
              x: {
                ticks: {
                  callback: function (value, index, ticks) {
                    return "channel " + value;
                  },
                },
              },
              y: {
                min: -50,
                max: 110,
              }
            },
          },
          data: {
            labels: data.map(row => row.channel),
            datasets: [
              {
                label: "Temperature (Channels 8 and 9)",
                data: data.map(row => row.value)
              }
            ]
          }
        }
      );
    })();
  </script>

  <!-- Registers processing -->
  <!-- Note: DEVICE_STR and DEVICE_ID should be defined externally -->
  <script type="text/javascript">
    const API_TOKEN = document.querySelector(".vis-view").getAttribute("apitoken");
    const API_BASE_URL = document.querySelector(".vis-view").getAttribute("apibaseurl");

    async function postResponse(body, url) {
      const res = await new Promise((resolve, reject) => {
        const request = new XMLHttpRequest();
        request.onload = function () {
          const data = JSON.parse(request.response);
          resolve(data);
        }

        request.onerror = function (err) {
          console.error(err);
          reject(err)
        }

        request.open("POST", url);
        request.setRequestHeader("authorization", `token ${API_TOKEN}`);
        request.setRequestHeader("Content-Type", "application/json");
        request.send(JSON.stringify(body));
      });

      return res;
    }

    async function getResponse(url) {
      const res = await new Promise((resolve, reject) => {
        const request = new XMLHttpRequest();
        request.onload = function () {
          const data = JSON.parse(request.response);
          resolve(data);
        }

        request.onerror = function (err) {
          console.error(err);
          reject(err)
        }

        request.open("GET", url);
        request.setRequestHeader("authorization", `token ${API_TOKEN}`);
        request.setRequestHeader("Content-Type", "application/json");
        request.send();
      });

      return res;
    }

    async function rawReadRegs(address, registersNum) {
      const deviceInfo = await getResponse(`${API_BASE_URL}/v1/device/${DEVICE_ID}/`);

      const body = {
        deviceModbusId: deviceInfo.modbusUnitId,
        address: address,
        kind: "holding",
        registersNum: registersNum,
        connection: {
          kind: "net-id",
          networkId: deviceInfo.netId,
        }
      };

      const res = await postResponse(body, `${API_BASE_URL}/v1/raw/read-register-group/`);
      return res;
    }

    async function readShortReg(address) {
      const regs = await rawReadRegs(address, 1);
      if (regs.ok) {
        return regs.ok[0];
      } else {
        return undefined;
      }
    }

    async function readLongReg(address) {
      const regs = await rawReadRegs(address, 2);
      if (regs.ok) {
        return ((regs.ok[0]) << 16) + regs.ok[1];
      } else {
        return undefined;
      }
    }

    async function writeRegValues(address, values) {
      const deviceInfo = await getResponse(`${API_BASE_URL}/v1/device/${DEVICE_ID}/`);

      const body = {
        deviceModbusId: deviceInfo.modbusUnitId,
        address: address,
        kind: "holding",
        value: values,
        connection: {
          kind: "net-id",
          networkId: deviceInfo.netId,
        }
      };

      const res = await postResponse(body, `${API_BASE_URL}/v1/raw/write-register-group/`);
      return res;
    }

    async function getFirmwareVersion() {
      const reg = await rawReadRegs(1, 1);
      if (reg.ok) {
        const version_major = ((reg.ok[0] & 0xff00) >> 8).toString();
        const version_minor = (reg.ok[0] & 0x00ff).toString();
        return version_major + "." + version_minor;
      } else {
        return "Error";
      }
    }
  </script>

  <!-- Registers reading in loop -->
  <script type="text/javascript">
    const mapRegisters = new Map();

    var rpm416ReadingPhase = 0;

    async function batchRegistersRead() {
      rpm416ReadingPhase %= 8;

      if (rpm416ReadingPhase == 3) { // low priority registers group 1
        // File identifier
        mapRegisters.set(16, await readShortReg(16));

        // File size
        mapRegisters.set(17, await readLongReg(17));

        // Uptime value
        mapRegisters.set(19, await readLongReg(19));

        // Device time
        mapRegisters.set(21, await readLongReg(21));

        mapRegisters.set(104, await readLongReg(104));
        mapRegisters.set(107, await readLongReg(107));

        mapRegisters.set(122, await readLongReg(122));
        mapRegisters.set(125, await readLongReg(125));

        mapRegisters.set(140, await readLongReg(140));
        mapRegisters.set(143, await readLongReg(143));

        mapRegisters.set(158, await readLongReg(158));
        mapRegisters.set(161, await readLongReg(161));

        mapRegisters.set(176, await readLongReg(176));
        mapRegisters.set(179, await readLongReg(179));

        mapRegisters.set(194, await readLongReg(194));
        mapRegisters.set(197, await readLongReg(197));

        mapRegisters.set(212, await readLongReg(212));
        mapRegisters.set(215, await readLongReg(215));
      } else if (rpm416ReadingPhase == 7) { // low priority registers group 2
        // Temperature
        mapRegisters.set(227, await readLongReg(227));
        mapRegisters.set(245, await readLongReg(245));

        // Analog voltage ser scale
        mapRegisters.set(266, await readLongReg(266));

        // Analog current user scale
        mapRegisters.set(284, await readLongReg(284));

        // Counters & frequencies
        mapRegisters.set(302, await readLongReg(302));
        mapRegisters.set(305, await readLongReg(305));
        mapRegisters.set(320, await readLongReg(320));
        mapRegisters.set(323, await readLongReg(323));
        mapRegisters.set(338, await readLongReg(338));
        mapRegisters.set(341, await readLongReg(341));
        mapRegisters.set(356, await readLongReg(356));
        mapRegisters.set(359, await readLongReg(359));

        // AB, BC, CA
        mapRegisters.set(425, await readLongReg(425));
        mapRegisters.set(428, await readLongReg(428));
        mapRegisters.set(431, await readLongReg(431));

        // Negative sequence, positive sequence, zero sequence
        mapRegisters.set(434, await readLongReg(434));
        mapRegisters.set(437, await readLongReg(437));
        mapRegisters.set(440, await readLongReg(440));
      } else { // high priority registers
        // State register
        mapRegisters.set(8, await readLongReg(8));

        // Faults register
        mapRegisters.set(10, await readLongReg(10));

        // voltages RMS (L1, L2, L3)
        mapRegisters.set(101, await readLongReg(101));
        mapRegisters.set(119, await readLongReg(119));
        mapRegisters.set(137, await readLongReg(137));

        // current RMS (L1, L2, L3)
        mapRegisters.set(155, await readLongReg(155));
        mapRegisters.set(173, await readLongReg(173));
        mapRegisters.set(191, await readLongReg(191));

        // Current RMS
        mapRegisters.set(209, await readLongReg(209));

        // Analog voltage
        mapRegisters.set(263, await readLongReg(263));

        // Analog current
        mapRegisters.set(281, await readLongReg(281));
      }

      rpm416ReadingPhase++;

      return false;
    }
  </script>

  <script>
    function updateDisplayedValue(idStr, address, decimal) {
      const value = mapRegisters.get(address);
      if (value === undefined) {
        document.querySelector("#" + idStr).innerHTML = "-";
      } else {
        if (decimal == 0 || decimal === undefined) {
          document.querySelector("#" + idStr).innerHTML = value.toString();
        } else if (decimal == 1) {
          document.querySelector("#" + idStr).innerHTML = (value * 0.1).toFixed(1);
        } else if (decimal == 2) {
          document.querySelector("#" + idStr).innerHTML = (value * 0.01).toFixed(2);
        }
      }
    }

    function updateDisplayedUptime() {
      const value = mapRegisters.get(19);
      if (value === undefined) {
        document.querySelector("#rpm416-uptime").innerHTML = "undefined";
      } else {
        const days = (value / 86400).toFixed(0);

        const hours = (value % 86400) / 3600;
        const hh = hours < 10 ? "0" + hours.toFixed(0) : hours.toFixed(0);

        const minutes = (value % 3600) / 60;
        const mm = minutes < 10 ? "0" + minutes.toFixed(0) : minutes.toFixed(0);

        const seconds = value % 60;
        const ss = seconds < 10 ? "0" + seconds.toFixed(0) : seconds.toFixed(0);
        document.querySelector("#rpm416-uptime").innerHTML = days + " days " + hh + ":" + mm + ":" + ss;
      }
    }

    function updateDisplayedDeviceTime() {
      const value = mapRegisters.get(21);
      if (value === undefined) {
        document.querySelector("#rpm416-device-time").innerHTML = "undefined";
      } else {
        const startdate = new Date(1980, 1, 1, 0, 0, 0);
        const currentdate = (new Date(startdate.valueOf() + value * 1000)).toLocaleString();
        document.querySelector("#rpm416-device-time").innerHTML = currentdate;
      }
    }

    function updateDisplayedSDCardState() {
      const value = mapRegisters.get(8);
      if (value === undefined) {
        document.querySelector("#rpm416-memory-card-state").innerHTML = "-";
      } else {
        const state = value & (1 << 4);
        if (state == 0) {
          document.querySelector("#rpm416-memory-card-state").innerHTML = "No memory card installed";
        } else if (state == 1) {
          document.querySelector("#rpm416-memory-card-state").innerHTML = "Memory card installed";
        } else {
          document.querySelector("#rpm416-memory-card-state").innerHTML = "An error occured!";
          console.error("impossible state value");
        }
      }
    }

    function updateDisplayedFileName() {
      const id = mapRegisters.get(16);
      if (id === undefined) {
        document.querySelector("#rpm416-file-id").innerHTML = "-";
      } else {
        let id_str = "";

        if (id < 0) {
          document.querySelector("#rpm416-file-id").innerHTML = "An error occured";
          console.error("File number is beyond allowable range:", id);
        } else if (id < 10) {
          id_str = "000" + id.toString();
        } else if (id < 100) {
          id_str = "00" + id.toString();
        } else if (id < 1000) {
          id_str = "0" + id.toString();
        } else if (id < 10000) {
          id_str = id.toString();
        } else {
          document.querySelector("#rpm416-file-id").innerHTML = "An error occured";
          console.error("File number is beyond allowable range:", id);
        }

        document.querySelector("#rpm416-file-id").innerHTML = "FILE" + id_str + ".RDF";
      }
    }

    function updateDisplayedFileSize() {
      const filesize = mapRegisters.get(17);
      if (filesize === undefined) {
        document.querySelector("#rpm416-file-size").innerHTML = "-"
      } else {
        document.querySelector("#rpm416-file-size").innerHTML = filesize.toString() + " bytes";
      }
    }

    function upateDisplayedTemperatures() {
      const temp1regvalue = mapRegisters.get(227);
      const temp2regvalue = mapRegisters.get(245);

      if (temp1regvalue !== undefined) {
        if ((temp1regvalue == 9999) || temp1regvalue == -9999) { // open circuit fault or short circuit fault
          rpm416temperatureBars.data.datasets[0].data[0] = undefined;
        } else {
          rpm416temperatureBars.data.datasets[0].data[0] = temp1regvalue * 0.1;
        }
      }

      if (temp2regvalue !== undefined) {
        if ((temp2regvalue == 9999) || temp2regvalue == -9999) { // open circuit fault or short circuit fault
          rpm416temperatureBars.data.datasets[0].data[1] = undefined;
        } else {
          rpm416temperatureBars.data.datasets[0].data[1] = temp2regvalue * 0.1;
        }
      }
    }

    function highlightErrorsElement(errors_present) {
      if (errors_present) {
        document.querySelector("#rpm416-errors-present").classList.remove("bg-secondary");
        document.querySelector("#rpm416-errors-present").classList.add("bg-warning");
      } else {
        document.querySelector("#rpm416-errors-present").classList.remove("bg-warning");
        document.querySelector("#rpm416-errors-present").classList.add("bg-secondary");
      }
    }

    function updateDisplayedErrorsPresent() {
      const value = mapRegisters.get(8);
      if (value === undefined) {
        return;
      } else {
        const is_error = value & (1 << 0);
        if (is_error == 1) {
          highlightErrorsElement(true);
        } else {
          highlightErrorsElement(false);
        }
      }
    }

    function highlightRecordingProcess(recording_process) {
      if (recording_process) {
        document.querySelector("#rpm416-data-recording").classList.remove("bg-secondary");
        document.querySelector("#rpm416-data-recording").classList.add("bg-success");
      } else {
        document.querySelector("#rpm416-data-recording").classList.remove("bg-success");
        document.querySelector("#rpm416-data-recording").classList.add("bg-secondary");
      }
    }

    function updateDisplayedRecordingProcess() {
      const value = mapRegisters.get(8);
      if (value === undefined) {
        return;
      } else {
        const in_process = value & (1 << 1);
        if (in_process != 0) {
          document.querySelector("#rpm416-start-recording").disabled = true;
          document.querySelector("#rpm416-stop-recording").disabled = false;
          highlightRecordingProcess(true);
        } else {
          document.querySelector("#rpm416-start-recording").disabled = false;
          document.querySelector("#rpm416-stop-recording").disabled = true;
          highlightRecordingProcess(false);
        }
      }
    }
  </script>

  <script>
    const COMMAND_REGISTER_ADDRESS = 50;

    async function startRecording() {
      const START_RECORDING_COMMAND = 0x77A6;
      document.querySelector("#rpm416-start-recording-spinner").style.display = "inline-block";
      await writeRegValues(COMMAND_REGISTER_ADDRESS, [START_RECORDING_COMMAND]);
      document.querySelector("#rpm416-start-recording-spinner").style.display = "none";
      document.querySelector("#rpm416-start-recording").disabled = true;
      document.querySelector("#rpm416-stop-recording").disabled = false;
    }

    async function stopRecording() {
      const STOP_RECORDING_COMMAND = 0x5606;
      document.querySelector("#rpm416-stop-recording-spinner").style.display = "inline-block";
      await writeRegValues(COMMAND_REGISTER_ADDRESS, [STOP_RECORDING_COMMAND]);
      document.querySelector("#rpm416-stop-recording-spinner").style.display = "none";
      document.querySelector("#rpm416-start-recording").disabled = false;
      document.querySelector("#rpm416-stop-recording").disabled = true;
    }

    async function restartRegistrator() {
      const RESTART_REGISTRATOR_COMMAND = 0xF2C5;
      document.querySelector("#rpm416-restart-registrator").style.display = "inline-block";
      await writeRegValues(COMMAND_REGISTER_ADDRESS, [RESTART_REGISTRATOR_COMMAND]);
      document.querySelector("#rpm416-restart-registrator").style.display = "none";
    }

    document.querySelector("#rpm416-start-recording").addEventListener("click", startRecording);
    document.querySelector("#rpm416-stop-recording").addEventListener("click", stopRecording);
    document.querySelector("#rpm416-restart-registrator").addEventListener("click", restartRegistrator);

    async function resetErrors() {
      const RESET_ERRORS_COMMAND = 0x5596;
      document.querySelector("#rpm416-reset-errors-spinner").style.display = "inline-block";
      await writeRegValues(COMMAND_REGISTER_ADDRESS, [RESET_ERRORS_COMMAND]);
      document.querySelector("#rpm416-reset-errors-spinner").style.display = "none";
    }

    document.querySelector("#rpm416-reset-errors").addEventListener("click", resetErrors);
  </script>

  <!-- Table -->
  <script type="text/javascript">
    const RPM416_FAULT_NAMES = [
      "Real time clock failure",
      "No access to AD coder",
      "No access to MI.",
      "No access to MR.",
      "No access to RAM.",
      "No disc in card slot.",
      "Disc is protected from recording.",
      "Disc initialization is impossible.",
      "Disc connection is impossible.",
      "No free space on disc.",
      "Data reading from disc is impossible.",
      "Catalogue cannot be created or opened.",
      "File name limit (9999) is exceeded.",
      "Files list is not available.",
      "File cannot be created.",
      "Recording in file is impossible.",
      "Settings failure in flash memory.",
      "Settings cannot be saved in flash memory.",
      "Calibration failure in flash memory.",
      "Memory overflow"
    ];

    const faultsStates = [undefined, undefined];
    var faultsStatesIdx = 0;
    const faultsChangesList = new Array(32).fill(0);

    const RPM416_FAULT_OCCURED = 1;
    const RPM416_FAULT_RESOLVED = -1;
    const RPM416_FAULT_UNCHANGED = 0;

    function checkFaultsChanged() {
      faultsStates[faultsStatesIdx] = mapRegisters.get(10);

      if ((faultsStates[0] === undefined) || (faultsStates[1] === undefined)) {
        faultsStatesIdx = (faultsStatesIdx + 1) % 2;
        return;
      }

      const faultsDiffStates = faultsStates[0] ^ faultsStates[1];

      for (let i = 0; i < 32; i++) {
        if (((faultsDiffStates & (1 << i)) != 0) && ((faultsStates[faultsStatesIdx] & (1 << i)) != 0)) {
          faultsChangesList[i] = RPM416_FAULT_OCCURED;
        } else if (((faultsDiffStates & (1 << i)) != 0) && ((faultsStates[faultsStatesIdx] & (1 << i)) == 0)) {
          faultsChangesList[i] = RPM416_FAULT_RESOLVED;
        } else {
          faultsChangesList[i] = RPM416_FAULT_UNCHANGED;
        }
      }

      faultsStatesIdx = (faultsStatesIdx + 1) % 2;
    }

    function addRow(col1str, col2str, col3str, col4str) {
      let tableBody = document.querySelector("#rpm416-errorlist-table-body");

      let row = document.createElement("tr");

      let cell1 = document.createElement("td");
      let cell2 = document.createElement("td");
      let cell3 = document.createElement("td");
      let cell4 = document.createElement("td");

      cell1.innerHTML = col1str;
      cell2.innerHTML = col2str;
      cell3.innerHTML = col3str;
      cell4.innerHTML = col4str;

      row.appendChild(cell1);
      row.appendChild(cell2);
      row.appendChild(cell3);
      row.appendChild(cell4);

      tableBody.appendChild(row);
    }

    function timeString(dateTime) {
      const hoursNum = dateTime.getHours();
      let hoursStr = hoursNum.toString();
      if (hoursNum < 10) {
        hoursStr = "0" + hoursStr;
      }

      const minutesNum = dateTime.getMinutes();
      let minutesStr = minutesNum.toString();
      if (minutesNum < 10) {
        minutesStr = "0" + minutesStr;
      }

      const secondsNum = dateTime.getSeconds();
      let secondsStr = secondsNum.toString();
      if (secondsNum < 10) {
        secondsStr = "0" + secondsStr;
      }

      return hoursStr + ":" + minutesStr + ":" + secondsStr;
    }

    function updateTable() {
      checkFaultsChanged();

      let rowSign = "";
      let rowCode = "";
      let rowText = "";
      let rowTime = "";

      for (let i = 0; i < 32; i++) {
        if (faultsChangesList[i] == RPM416_FAULT_OCCURED) {
          const currentDateTime = new Date();
          rowSign = "❌";
          rowCode = (i + 1).toString(); // As bit number, but started from 1 instead of 0
          rowText = RPM416_FAULT_NAMES[i];
          rowTime = timeString(currentDateTime);

          addRow(rowSign, rowCode, rowText, rowTime);
        } else if (faultsChangesList[i] == RPM416_FAULT_RESOLVED) {
          const currentDateTime = new Date();
          rowSign = "✅";
          rowCode = (i + 1).toString(); // As bit number, but started from 1 instead of 0
          rowText = RPM416_FAULT_NAMES[i];
          rowTime = timeString(currentDateTime);

          addRow(rowSign, rowCode, rowText, rowTime);
        }
      }

    }
  </script>

  <!-- Switching between main and graph part of visualization -->
  <script>
    var visualizationInterval = undefined;
    var graphInterval = undefined;

    document.querySelector("#rpm416-button-view").addEventListener("click", function () {
      document.querySelector("#rpm416-substrate").style.display = "block";
      document.querySelector("#rpm416-data-graphs").style.display = "block";
      clearInterval(visualizationInterval);
      graphInterval = setInterval(updateGraphOnVis, UPDATE_VISUALIZATION_INTERVAL_MS);
    });

    document.querySelector("#rpm416-button-data-graphs-close").addEventListener("click", function () {
      document.querySelector("#rpm416-substrate").style.display = "none";
      document.querySelector("#rpm416-data-graphs").style.display = "none";
      visualizationInterval = setInterval(updateValuesOnVis, UPDATE_VISUALIZATION_INTERVAL_MS);
      clearInterval(graphInterval);
    });

    document.querySelector("#rpm416-substrate").addEventListener("click", function () {
      document.querySelector("#rpm416-substrate").style.display = "none";
      document.querySelector("#rpm416-data-graphs").style.display = "none";
      visualizationInterval = setInterval(updateValuesOnVis, UPDATE_VISUALIZATION_INTERVAL_MS);
      clearInterval(graphInterval);
    });
  </script>

  <!-- Graph interface elements -->
  <script>
    var rpm416DataCheckboxesState = [
      { checked: true, value: 101 },
      { checked: true, value: 101 },
      { checked: true, value: 101 },
      { checked: false, value: 101 },
      { checked: false, value: 101 },
      { checked: false, value: 101 }
    ];

    if (localStorage.getItem("rpm416DataCheckboxesState") === null) {
      localStorage.setItem("rpm416DataCheckboxesState", JSON.stringify(rpm416DataCheckboxesState));
    } else {
      rpm416DataCheckboxesState = JSON.parse(localStorage.getItem("rpm416DataCheckboxesState"));
      for (let i = 1; i <= 6; i++) {
        document.querySelector("#rpm416-checkbox-graphdata-" + i.toString()).checked = rpm416DataCheckboxesState[i - 1].checked;
        document.querySelector("#rpm416-select-graphvalue-" + i.toString()).disabled = !rpm416DataCheckboxesState[i - 1].checked;
        document.querySelector("#rpm416-select-graphvalue-" + i.toString()).value = !rpm416DataCheckboxesState[i - 1].value;
        document.querySelector("#rpm416-input-ratio-" + i.toString()).disabled = !rpm416DataCheckboxesState[i - 1].checked;
      }
    }

    document.querySelector("#rpm416-checkbox-graphdata-1").addEventListener("click", function () {
      let state_disabled = !(document.querySelector("#rpm416-checkbox-graphdata-1").checked);
      document.querySelector("#rpm416-select-graphvalue-1").disabled = state_disabled;
      document.querySelector("#rpm416-input-ratio-1").disabled = state_disabled;
      rpm416DataCheckboxesState[0] = !state_disabled;
      localStorage.setItem("rpm416DataCheckboxesState", JSON.stringify(rpm416DataCheckboxesState));
    });

    document.querySelector("#rpm416-checkbox-graphdata-2").addEventListener("click", function () {
      let state_disabled = !(document.querySelector("#rpm416-checkbox-graphdata-2").checked);
      document.querySelector("#rpm416-select-graphvalue-2").disabled = state_disabled;
      document.querySelector("#rpm416-input-ratio-2").disabled = state_disabled;
      rpm416DataCheckboxesState[1] = !state_disabled;
      localStorage.setItem("rpm416DataCheckboxesState", JSON.stringify(rpm416DataCheckboxesState));
    });

    document.querySelector("#rpm416-checkbox-graphdata-3").addEventListener("click", function () {
      let state_disabled = !(document.querySelector("#rpm416-checkbox-graphdata-3").checked);
      document.querySelector("#rpm416-select-graphvalue-3").disabled = state_disabled;
      document.querySelector("#rpm416-input-ratio-3").disabled = state_disabled;
      rpm416DataCheckboxesState[2] = !state_disabled;
      localStorage.setItem("rpm416DataCheckboxesState", JSON.stringify(rpm416DataCheckboxesState));
    });

    document.querySelector("#rpm416-checkbox-graphdata-4").addEventListener("click", function () {
      let state_disabled = !(document.querySelector("#rpm416-checkbox-graphdata-4").checked);
      document.querySelector("#rpm416-select-graphvalue-4").disabled = state_disabled;
      document.querySelector("#rpm416-input-ratio-4").disabled = state_disabled;
      rpm416DataCheckboxesState[3] = !state_disabled;
      localStorage.setItem("rpm416DataCheckboxesState", JSON.stringify(rpm416DataCheckboxesState));
    });

    document.querySelector("#rpm416-checkbox-graphdata-5").addEventListener("click", function () {
      let state_disabled = !(document.querySelector("#rpm416-checkbox-graphdata-5").checked);
      document.querySelector("#rpm416-select-graphvalue-5").disabled = state_disabled;
      document.querySelector("#rpm416-input-ratio-5").disabled = state_disabled;
      rpm416DataCheckboxesState[4] = !state_disabled;
      localStorage.setItem("rpm416DataCheckboxesState", JSON.stringify(rpm416DataCheckboxesState));
    });

    document.querySelector("#rpm416-checkbox-graphdata-6").addEventListener("click", function () {
      let state_disabled = !(document.querySelector("#rpm416-checkbox-graphdata-6").checked);
      document.querySelector("#rpm416-select-graphvalue-6").disabled = state_disabled;
      document.querySelector("#rpm416-input-ratio-6").disabled = state_disabled;
      rpm416DataCheckboxesState[5] = !state_disabled;
      localStorage.setItem("rpm416DataCheckboxesState", JSON.stringify(rpm416DataCheckboxesState));
    });

    document.querySelector("#rpm416-button-clear-graph").addEventListener("click", function () {
      for (let i = 0; i <= 5; i++) {
        clearGraphLine(i);
      }
    });

    for (let i = 1; i <= 6; i++) {
      document.querySelector("#rpm416-select-graphvalue-" + i.toString).addEventListener("change", function () {
        rpm416DataCheckboxesState[i - 1].value = document.querySelector("#rpm416-select-graphvalue-" + i.toString).value;
        localStorage.setItem("rpm416DataCheckboxesState", JSON.stringify(rpm416DataCheckboxesState));
      });
    }
  </script>

  <!-- Thread loop -->
  <script>
    var rpm416ReadLock = false;

    getFirmwareVersion().then((value) => {
      document.querySelector("#rpm416-firmware-version").innerHTML = value;
    });

    async function updateValuesOnVis() {
      if (!rpm416ReadLock) {
        rpm416ReadLock = true;
        rpm416ReadLock = await batchRegistersRead();
      }

      updateDisplayedUptime();
      updateDisplayedDeviceTime();
      updateDisplayedSDCardState();
      updateDisplayedFileName();
      updateDisplayedFileSize();
      upateDisplayedTemperatures();
      updateDisplayedErrorsPresent();
      updateDisplayedRecordingProcess();
      updateTable();
      updateDisplayedValue("rpm416-negative-sequence-value", 434, 1);
      updateDisplayedValue("rpm416-positive-sequence-value", 437, 1);
      updateDisplayedValue("rpm416-zero-sequence-value", 440, 1);
      updateDisplayedValue("rpm416-voltage-rms-1", 101, 1);
      updateDisplayedValue("rpm416-voltage-thdr-1", 107, 0);
      updateDisplayedValue("rpm416-voltage-frequency-1", 104, 2);
      updateDisplayedValue("rpm416-voltage-rms-2", 119, 1);
      updateDisplayedValue("rpm416-voltage-thdr-2", 125, 0);
      updateDisplayedValue("rpm416-voltage-frequency-2", 122, 2);
      updateDisplayedValue("rpm416-voltage-rms-3", 137, 1);
      updateDisplayedValue("rpm416-voltage-thdr-3", 143, 0);
      updateDisplayedValue("rpm416-voltage-frequency-3", 140, 2);
      updateDisplayedValue("rpm416-amperage-rms-1", 155, 1);
      updateDisplayedValue("rpm416-amperage-thdr-1", 161, 0);
      updateDisplayedValue("rpm416-amperage-frequency-1", 158, 2);
      updateDisplayedValue("rpm416-amperage-rms-2", 173, 1);
      updateDisplayedValue("rpm416-amperage-thdr-2", 179, 0);
      updateDisplayedValue("rpm416-amperage-frequency-2", 176, 2);
      updateDisplayedValue("rpm416-amperage-rms-3", 191, 1);
      updateDisplayedValue("rpm416-amperage-thdr-3", 197, 0);
      updateDisplayedValue("rpm416-amperage-frequency-3", 194, 2);
      updateDisplayedValue("rpm416-voltage-line-ab", 425, 1);
      updateDisplayedValue("rpm416-voltage-line-bc", 428, 1);
      updateDisplayedValue("rpm416-voltage-line-ca", 431, 1);
      updateDisplayedValue("rpm416-analog-voltage", 263, 2);
      updateDisplayedValue("rpm416-analog-amperage", 281, 2);
      updateDisplayedValue("rpm416-analog-voltage-userscale", 266, 2);
      updateDisplayedValue("rpm416-analog-amperage-userscale", 284, 2);
      updateDisplayedValue("rpm416-amperage-rms", 209, 2);
      updateDisplayedValue("rpm416-amperage-thdr", 215, 0);
      updateDisplayedValue("rpm416-amperage-frequency", 212, 2);
      updateDisplayedValue("rpm416-impuls-frequency-1", 302, 1);
      updateDisplayedValue("rpm416-impuls-counter-1", 305, 0);
      updateDisplayedValue("rpm416-impuls-frequency-2", 320, 1);
      updateDisplayedValue("rpm416-impuls-counter-2", 323, 0);
      updateDisplayedValue("rpm416-impuls-frequency-3", 338, 1);
      updateDisplayedValue("rpm416-impuls-counter-3", 341, 0);
      updateDisplayedValue("rpm416-impuls-frequency-4", 356, 1);
      updateDisplayedValue("rpm416-impuls-counter-4", 359, 0);
    };

    visualizationInterval = setInterval(updateValuesOnVis, UPDATE_VISUALIZATION_INTERVAL_MS);
  </script>

  <!-- Graph in the popup window -->
  <script>
    const RPM416_GRAPH_CAPACITY = 360;

    var rpm416Graph = new Chart(
      document.querySelector("#rpm416-history-graph"),
      {
        type: "scatter",
        options: {
          animation: false,
          showLine: true,
          scales: {
            x: {
              min: -6,
              max: 0,
              ticks: {
                callback: function (value, index, ticks) {
                  return value + " min";
                },
              },
            },
            y0: {
              min: -1,
              max: 1,
              display: 'auto',
            },
            y1: {
              min: -1,
              max: 1,
              display: 'auto',
            },
            y2: {
              min: -1,
              max: 1,
              display: 'auto',
            },
            y3: {
              min: -1,
              max: 1,
              display: 'auto',
            },
            y4: {
              min: -1,
              max: 1,
              display: 'auto',
            },
            y5: {
              min: -1,
              max: 1,
              display: 'auto',
            },
          },
        },
        data: {
          labels: [],
          datasets: [
            {
              type: "scatter",
              data: new Array(RPM416_GRAPH_CAPACITY).fill({ x: undefined, y: undefined }),
            },
            {
              type: "scatter",
              data: new Array(RPM416_GRAPH_CAPACITY).fill({ x: undefined, y: undefined }),
            },
            {
              type: "scatter",
              data: new Array(RPM416_GRAPH_CAPACITY).fill({ x: undefined, y: undefined }),
            },
            {
              type: "scatter",
              data: new Array(RPM416_GRAPH_CAPACITY).fill({ x: undefined, y: undefined }),
            },
            {
              type: "scatter",
              data: new Array(RPM416_GRAPH_CAPACITY).fill({ x: undefined, y: undefined }),
            },
            {
              type: "scatter",
              data: new Array(RPM416_GRAPH_CAPACITY).fill({ x: undefined, y: undefined }),
            },
          ],
        },
      }
    );

    var rpm416graphSequencing = new Array(6).fill().map(function () {
      return {
        i: 0,
        queue: new Array(RPM416_GRAPH_CAPACITY).fill({ v: undefined, t: undefined }),
      };
    });

    if (localStorage.getItem("rpm416graphSequencing") === null) {
      localStorage.setItem("rpm416graphSequencing", JSON.stringify(rpm416graphSequencing));
    } else {
      rpm416graphSequencing = JSON.parse(localStorage.getItem("rpm416graphSequencing"));
    }

    function addToGraph(graphIndex /* 0 to 5 */, value, timestamp) {
      rpm416graphSequencing[graphIndex].queue.push({ v: value, t: new Date().valueOf() });
      while (rpm416graphSequencing[graphIndex].queue.length > RPM416_GRAPH_CAPACITY) {
        rpm416graphSequencing[graphIndex].queue.shift();
      }
      rpm416graphSequencing[graphIndex].i++;
      rpm416graphSequencing[graphIndex].i %= RPM416_GRAPH_CAPACITY;

      localStorage.setItem("rpm416graphSequencing", JSON.stringify(rpm416graphSequencing));

      const now = new Date().valueOf();

      for (i = 0; i < RPM416_GRAPH_CAPACITY; i++) {
        rpm416Graph.data.datasets[graphIndex].data[RPM416_GRAPH_CAPACITY - i] = {
          x: (rpm416graphSequencing[graphIndex].queue[i].t - now) / 60000.0,
          y: rpm416graphSequencing[graphIndex].queue[i].v,
        };
      }

      rpm416Graph.update();
    }

    function clearGraphLine(graphIndex /* 0 to 5 */) {
      rpm416graphSequencing[graphIndex].queue.fill({ v: undefined, t: undefined });
      localStorage.setItem("rpm416graphSequencing", JSON.stringify(rpm416graphSequencing));
    }

    function processChangedGraphselectorCheckbox(i /* 0 to 5*/) {
      if (!document.querySelector("#rpm416-checkbox-graphdata-" + (i + 1).toString()).checked) {
        clearGraphLine(i);
      }
    }

    const MULTIPLIERS_ARR = [
      [101, 0.1],
      [104, 0.01],
      [107, 1],
      [110, 0.1],
      [113, 0.1],
      [116, 0.1],
      [119, 0.1],
      [122, 0.01],
      [125, 1],
      [128, 0.1],
      [131, 0.1],
      [134, 0.1],
      [137, 0.1],
      [140, 0.01],
      [143, 1],
      [146, 0.1],
      [149, 0.1],
      [152, 0.1],
      [155, 0.01],
      [158, 0.01],
      [161, 1],
      [164, 0.01],
      [167, 0.01],
      [170, 0.01],
      [173, 0.01],
      [176, 0.01],
      [179, 1],
      [182, 0.01],
      [185, 0.01],
      [188, 0.01],
      [191, 0.01],
      [194, 0.01],
      [197, 1],
      [200, 0.01],
      [203, 0.01],
      [206, 0.01],
      [209, 0.01],
      [212, 0.01],
      [215, 1],
      [218, 0.01],
      [221, 0.01],
      [224, 0.01],
      [227, 0.1],
      [245, 0.1],
      [263, 0.01],
      [266, 1],
      [281, 0.01],
      [284, 1],
      [299, 1],
      [302, 1],
      [305, 1],
      [317, 1],
      [320, 1],
      [323, 1],
      [335, 1],
      [338, 1],
      [341, 1],
      [353, 1],
      [356, 1],
      [359, 1],
      [371, 0.1],
      [374, 0.1],
      [377, 0.1],
      [380, 0.001],
      [383, 1],
      [386, 1],
      [389, 0.1],
      [392, 0.1],
      [395, 0.1],
      [398, 0.001],
      [401, 1],
      [404, 1],
      [407, 0.1],
      [410, 0.1],
      [413, 0.1],
      [416, 0.001],
      [419, 1],
      [422, 1],
      [425, 0.1],
      [428, 0.1],
      [431, 0.1],
      [434, 0.1],
      [437, 0.1],
      [440, 0.1],
    ];

    const MULTIPLIERS_MAP = new Map(MULTIPLIERS_ARR);

    async function updateGraphOnVis() {
      if (!document.querySelector("#rpm416-select-graphvalue-1").disabled) {
        console.log(MULTIPLIERS_MAP);
        const regAddr = Number(document.querySelector("#rpm416-select-graphvalue-1").value);
        const data = await readLongReg(regAddr);
        const multiplier = MULTIPLIERS_MAP.get(regAddr);
        addToGraph(0, data * multiplier, new Date().valueOf());
      }

      if (!document.querySelector("#rpm416-select-graphvalue-2").disabled) {
        const regAddr = Number(document.querySelector("#rpm416-select-graphvalue-2").value);
        const data = await readLongReg(regAddr);
        const multiplier = MULTIPLIERS_MAP.get(regAddr);
        addToGraph(1, data * multiplier, new Date().valueOf());
      }

      if (!document.querySelector("#rpm416-select-graphvalue-3").disabled) {
        const regAddr = Number(document.querySelector("#rpm416-select-graphvalue-3").value);
        const data = await readLongReg(regAddr);
        const multiplier = MULTIPLIERS_MAP.get(regAddr);
        addToGraph(2, data * multiplier, new Date().valueOf());
      }

      if (!document.querySelector("#rpm416-select-graphvalue-4").disabled) {
        const regAddr = Number(document.querySelector("#rpm416-select-graphvalue-4").value);
        const data = await readLongReg(regAddr);
        const multiplier = MULTIPLIERS_MAP.get(regAddr);
        addToGraph(3, data * multiplier, new Date().valueOf());
      }

      if (!document.querySelector("#rpm416-select-graphvalue-5").disabled) {
        const regAddr = Number(document.querySelector("#rpm416-select-graphvalue-5").value);
        const data = await readLongReg(regAddr);
        const multiplier = MULTIPLIERS_MAP.get(regAddr);
        addToGraph(4, data * multiplier, new Date().valueOf());
      }

      if (!document.querySelector("#rpm416-select-graphvalue-6").disabled) {
        const regAddr = Number(document.querySelector("#rpm416-select-graphvalue-6").value);
        const data = await readLongReg(regAddr);
        const multiplier = MULTIPLIERS_MAP.get(regAddr);
        addToGraph(5, data * multiplier, new Date().valueOf());
      }
    }
  </script>
</div>